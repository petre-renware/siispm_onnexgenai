<!-#NOTE ### #TODO_update_component_name#TODO (c1) Portal web servicii electronice
    - this file will be used as included in 810.02-System_Landscape.md, so:
    - accordingly its heading cannot be upper that Heading 3 (###)
    - ATTN: this file is used as INCLUDED in `810.02-System_Landscape` SO USE ANY LINKS / REFERENCES AS IT WOULD BE PART OF PARENT DOC
-->




<!-- -#NOTE din ANPM matrice complianta 64-67 -->
Astfel plecind din portalul existent al companiei beneficiare, sau dintr-pagina dedicata (Master / Landing Page), sistemul va prezenta 4 tipuri de **servicii majore** ca `URL`-uri distincte:

* **Solicitare** – servicii prin care consumatorii transmit catre beneficiar o solicitare si in urma procesarii acesteia de catre beneficiar primesc un document de raspuns

* **Raportare** – servicii prin care consumatorii transmit catre beneficiar informatii structurate. Pentru acest tip de servicii, beneficiarul nu emite un document de raspuns, ci doar confirmari privind primirea, procesarea și validarea (ca format NU ca si continut) informatiei respective

* **Notificari** - servicii prin care consumatorii transmit catre beneficiar informatii structurate sau nestructurate. Pentru acest tip de servicii, beneficiarul nu emite un document de raspuns, ci doar confirmari privind primirea, procesarea și validarea (ca format NU ca si continut) notificarii respective <!-- -#FIXME aceasta cred ca ar trebui sa fie ANPM --to-- consumator | modelul acest este deja la item anterior "Raportare" -->

* **Prezentare** – servicii prin care consumatorii pot accesa informatiile publicate de catre beneficiar pentru domeniile sale de competenta


Considerind **`<SIISPM_root>`** baza URL de la care se pleaca (publicat(a) de catre beneficiarul sistemului), vor fi “prezente” urmatoarele rute (***numite si zone in continuarea documentului***):

* `<SIISPM_root>/solicitari/...` - pentru servicii de tip **Solicitare**

* `<SIISPM_root>/raportare/...` - pentru servicii de tip **Raportare**

* `<SIISPM_root>/notificari/...` - pentru servicii de tip **Notificari**

* `<SIISPM_root>/prezentare/...` - pentru servicii de tip **Prezentare**

Aceste rute sunt aferente serviciilor (zonelor functionale) asigurate de sistemul SIISPM. Intre acestea se vor vor putea face redirectari ori de cite ori va fi nevoie cu respectarea regulior de securitate specifice zonei respective.




#### Considerente de securitate

Fiecare zona aferenta unei rute (din cele 4 enumerate mai sus) va implementa *propriile politici de securitate* (de ex autentificare si autorizare). De asemenea va fi disponibil si un *set de politici de securitate comun* tuturor zonelor, modificarea acestuia afectind toate zonele.

Zonele vor mosteni setul *comun de reguli de securitate dar il vor putea supracsrie (overwrite)*. In caz de *conflicte* (colisions) intre mai multe reguli de securitate, regulile proprii zonei vor prima asupra celorlalte."

<!-- -#NOTE din ANPM matrice complianta 68 -->
O zona aferenta unui serviciu apelat de catre un consumator va permite incarcarea de documente si transferul acestora catre modulul de management de documente (**(c2)** Componenta pentru Managementul documentelor) prin intermediul API-ului acestuia. Confirmarea preluarii unui document se va face de catre zona de servicii dedicata notificarilor ce va fi la rindul ei apelata la incarcarea unui document insa in mod "asincron intirziat" (delayed async) pentru a evita blocarea inutila a proceselor.

<!-- -#NOTE din ANPM matrice complianta 70 -->
Pentru toate zonele aferente serviciilor (enumerate in sectiunea anterioara) vor prezenta:

* o sectiune introductiva ("marcata" grafic distinct pentru vizibilitate) ce va cuprinde o descriere a serviciului respectiv urmata de

* o sectiune dedicata detaliilor in care vor fi enumerate "item-urile" aferente, de orice tip sau natura ar fi (documente, servicii, etc) si folosind un set de pictograme (icone miniaturale) diferite pentru fiecare tip / natura astfel incit sa existe un minim feedback vizual mai mult decit simplul text. Aceste item-uri vor fi deprezentate ca `link HTML` daca reprezinta ceva ce poate fi accesat "mai departe" si prezinta interes pentru utilizator pe un flux logic al acestuia








-#TODO workflow ce o fi in NexGenAI - also update **Implementarea componentei** with NexGenAI `business workflow / camunda` component refrence

<!-- -#NOTE din ANPM matrice complianta 71 - 76 -->

Accesarea unui serviciu în formă electronică presupune parcurgerea de către utilizator a unei succesiuni de activități asistate de Portal. Serviciile electronice vor fi centrate pe activități şi pe finalitatea acestora, constând într-o succesiune de pași care includ, după caz:

- ecrane de informare;
- ecrane care conțin formulare web care trebuie completate, cu atașarea de fișiere (fotografii, documente scanate);
- ecrane care permit încărcarea de fișiere structurate de tip xml sau csv;
- ecrane care permit geolocalizarea in timp real a operatorului;
- ecrane prin care se facilitează plata electronica a tarifelor percepute pentru serviciile solicitate
- ecrane de vizualizare a unor documente generate automat de către Portal, în baza informațiilor furnizate până la acel moment.







-#TODO wso2 integrarea cu altii - also update **Implementarea componentei** with NexGenAI `integrator` component refrence

<!-- -#NOTE din ANPM matrice complianta 91 -->
Portalul web se va integra prin servicii web cel putin cu urmatoarele instituții: (#NOTE list is not realy important here but as refrence is ok)
- Ministerul Mediului, Apelor și Pădurilor
- Garda Națională de Mediu
- Administrația Fondului pentru Mediu
- ARBDD
- Regia Autonomă Romsilva
- ONRC
- ANAF
- ANCPI
- Ghiseul.ro


<!-- -#NOTE din ANPM matrice complianta 100 - 101 -->
Portalul web de servicii electronice se va integra prin REST API cu platforma ghiseul.ro în scopul facilitării plății serviciilor furnizate de ANPM către persoanele fizice și juridice. Portalul web de servicii electronice ca îndeplini astfel următoarele cerințe:

- va dispune de interfețe standardizate care să permită includerea în fluxurile de lucru aferente serviciilor electronice a unui pas ce presupune efectuarea unei plăți electronice;
- va dispune de o interfață internă care să permită gestiunea tarifelor de către personalul ANPM.





-#TODO forms sau ce o fi in NexGenAI - also update **Implementarea componentei** with NexGenAI component refrence

<!-- -#NOTE din ANPM matrice complianta 82 -->
Formularele web vor realiza, pentru unele câmpuri, validări ale datelor introduse de utilizator, pentru verificarea respectării unor constrângeri referitoare la: localizarea spațială a utilizatorului , tipul informațiilor care trebuie completate, lungimea minimă sau maximă a textului, la limite ale valorilor numerice sau ale datelor calendaristice.


<!-- -#NOTE din ANPM matrice complianta 83 -85 -->

Formularele web completate de utilizator vor fi interpretate în timp real de sistem, indicând utilizatorului următoarea activitate necesară în vederea finalizării demersului dorit, activitate care poate include:

- completarea altui formular;
- încărcarea de fișiere de tip imagine;
- încărcarea de fișiere structurate .xml sau .csv














-#TODO other bid-req - also update **Implementarea componentei** with NexGenAI component refrence

<!-- -#NOTE din ANPM matrice complianta 77 -->
Având în vedere complexitatea datelor/rapoartelor ce trebuie completate de către operatorii economici în cadrul serviciilor/aplicațiilor publice și timpul mare de operare necesar pentru completare, soluția tehnică propusă va trebui să poată simplifica extrem de mult acest proces prin punerea la dispoziția operatorilor și a unui mecansim de completare a datelor/rapoartelor cu condiția păstrării nomenclatoarelor comune aferente serviciilor;







-#TODO other bid-req - also update **Implementarea componentei** with NexGenAI component refrence

<!-- -#NOTE din ANPM matrice complianta 78 - 79 -->
Soluția tehnică va fi descrisă în etapa de analiză și proiectare, luând în considerare cel puțin, dar fără a se limita, la opțiunile tehnologice descrise mai jos: 

- o realizarea unor formulare inteligente care pot fi ulterior completării urcate în aplicație/serviciul public unde vor fi supuse procesului de validare. Formularele aferente serviciilor electronice vor fi realizate în tehnologie web şi vor putea fi completate de utilizator direct din browser, fără a fi necesară instalarea de componente software suplimentare

- o realizarea unei aplicații de tip client/desktop ce poate fi descarcată de pe site-ul instituției și utilizată local, fără a fi necesară conectarea la o aplicație web. Rezultatul final ar putea fi exportat într-un fișier cu un format convenabil pentru aplicația/serviciul public și acesta urcat și validat în aplicație/serviciul public





-#TODO other bid-req - also update **Implementarea componentei** with NexGenAI component refrence

<!-- -#NOTE din ANPM matrice complianta 80 -->
Formularele web care compun serviciile electronice vor include pentru unele câmpuri controale de culegere a informației de tip text simplu, text multilinie, lista de selecție valori dintr-un nomenclator, bifă (checkbox).




-#TODO other bid-req - also update **Implementarea componentei** with NexGenAI component refrence

<!-- -#NOTE din ANPM matrice complianta 81 -->
În cazul listelor de valori care au la bază nomenclatoare gestionate în alte aplicații/module/componente software din scopul acestui proiect, Portalul va permite integrarea cu acestea prin servicii web, astfel încât să se evite dublarea informației şi apariția desincronizărilor între diferitele versiuni ale unui nomenclator utilizate în cadrul diferitelor aplicații.


<!-- -#NOTE din ANPM matrice complianta 86 -->
Vor fi implementate reguli referitoare la obligativitatea atașării anumitor tipuri de documente scanate (de exemplu dovadă plată, contract, etc.). Regulile vor fi dependente de tipul de demers (serviciu electronic) şi de opțiunile selectate de către utilizator în cadrul formularului web.


<!-- -#NOTE din ANPM matrice complianta 87 -->
În procesul de completare a formularelor web, sistemul va inițializa formularul (sau câmpuri ale acestuia) cu unele dintre informațiile structurate salvate în cadrul profilului utilizatorului.


<!-- -#NOTE din ANPM matrice complianta 88 -->
Utilizatorii autentificați vor putea accesa și vizualiza în mod organizat istoricul solicitărilor/notificărilor/raportărilor trimise către instituție și stadiul procesării acestora.


<!-- -#NOTE din ANPM matrice complianta 89 -->
În cazul serviciilor electronice prin care se depune o solicitare (cum ar fi de exemplu ”Avizarea transportului de deșeuri” ), la finalizarea procesului aferent depunerii cererii, Portalul va genera un document electronic (pdf) care cuprinde toate informațiile completate de către solicitant în formularele web aferente pașilor de proces deja urmați, pentru a permite solicitantului să verifice toate informațiile introduse înainte de transmiterea solicitării. Generarea documentelor electronice în baza informațiilor structurate completate de către solicitant în formularele web se va baza pe șabloane configurabile, în care vor fi incluse atât informații structurate culese din formularele aferente serviciului electronic cât şi paragrafe formatate de text predefinit.


<!-- -#NOTE din ANPM matrice complianta 90 -->
Ulterior transmiterii unei solicitări/raportări/notificări, utilizatorul este notificat automat de către Portal prin email despre stadiul procesării şi poate vizualiza online stadiul acesteia, utilizând un link inclus în mesajul email primit.












































#### Implementarea componentei

Acesta componenta foloseste platforma [*Connections NexGenAI minim versiunea 2.3.3*](http://nexgenai.app/v2.3.3){ target="_blank" } astfel:

* *zonele, rutele* ce raspund la serviciile respective precum si regulile aferente de (web) networking sunt implementate folosind [Componenta Server Web](https://nexgenai.app/v2.3.3/comp_server_web.html) configurata in mod `wsgi` si `fastCGI`

* *politicile si regulile de securitate* sunt implementate folosind [Componenta identity](https://nexgenai.app/v2.3.3/comp_identity.html)

* partea de *controller "heavy code" a rutelor* este realizata cu oricare din serverele de aplicatie din [Componenta Server de Aplicatii](https://nexgenai.app/v2.3.3/comp_server_app.html)

* partea de *controller tip "simple scripting code" a rutelor* este realizata cu oricare din serverele de aplicatie din [Componenta Server Web](https://nexgenai.app/v2.3.3/comp_server_web.html) configurata in mod `CGI`


